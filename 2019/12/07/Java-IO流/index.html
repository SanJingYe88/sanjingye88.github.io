<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Java IO流 | This is SanJingYe88</title><meta name="description" content="Java IO流"><meta name="keywords" content="Java,IO"><meta name="author" content="SanJingYe88,822202281@qq.com"><meta name="copyright" content="SanJingYe88"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Java IO流"><meta name="twitter:description" content="Java IO流"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><meta property="og:type" content="article"><meta property="og:title" content="Java IO流"><meta property="og:url" content="http://sanjingye88.love/2019/12/07/Java-IO%E6%B5%81/"><meta property="og:site_name" content="This is SanJingYe88"><meta property="og:description" content="Java IO流"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://sanjingye88.love/2019/12/07/Java-IO%E6%B5%81/"><link rel="next" title="线程池" href="/http:/sanjingye88.love/2019/12/02/%E7%BA%BF%E7%A8%8B%E6%B1%A0/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'true',
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: {"text":"你放心。,有什么好说的，你的话我早知道了！,你从今以后，可就改了吧。,这个妹妹我曾见过的。,西方有石名黛，可代画眉之墨。,侬今葬花人笑痴，它年葬侬知是谁。,一朝春尽红颜老，花落人亡两不知！,宝哥哥，你的玉丢了不着急吗？,不着急，兴许是件好事。,跌了灯值钱，还是跌了人值钱？,黄金万两容易得，知心一个也难求。,我素日认他是个知己，果然是个知己。,不离不弃，芳龄永继。,莫失莫忘，仙寿恒昌。,都道是金玉良姻，俺只念木石前盟。,任凭弱水三千，我只取一瓢饮。,今日只作远别重逢，亦未为不可。","fontSize":"15px"},
  medium_zoom: 'false',
  Snackbar: undefined
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">This is SanJingYe88</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></span><span class="pull_right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">4</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">5</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#IO-流"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">IO 流</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#IO-流的体系"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">IO 流的体系</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#字节流"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">字节流</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#字符流"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">字符流</span></a></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#IO-流"><span class="toc-number">1.</span> <span class="toc-text">IO 流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IO-流的体系"><span class="toc-number">2.</span> <span class="toc-text">IO 流的体系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字节流"><span class="toc-number">3.</span> <span class="toc-text">字节流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符流"><span class="toc-number">4.</span> <span class="toc-text">字符流</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png)"><div id="post-info"><div id="post-title"><div class="posttitle">Java IO流</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> Created 2019-12-07<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> Updated 2019-12-07</time><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon" aria-hidden="true"></i><span>Word count: </span><span class="word-count">2.4k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon" aria-hidden="true"></i><span>Reading time: 9 min</span><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>Post View: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h3 id="IO-流"><a href="#IO-流" class="headerlink" title="IO 流"></a>IO 流</h3><p>&emsp;&emsp;IO 流解决的问题 : <code>设备与设备之间的数据传输问题</code>.   内存 -&gt; 硬盘   硬盘 -&gt; 内存 </p>
<p>&emsp;&emsp;IO 流的分类:<br>&emsp;&emsp;① 如果是按照数据的流向划分：<br>&emsp;&emsp;&emsp;&emsp;输入流    <code>InputStream</code>           数据从硬盘 -&gt; 程序<br>&emsp;&emsp;&emsp;&emsp;输出流    <code>OutputStream</code>        数据从程序 -&gt; 硬盘</p>
<p>&emsp;&emsp;② 如果按照处理的单位划分：<br>&emsp;&emsp;&emsp;&emsp;字节流 :  字节流读取的都是二进制文件, 读取到的二进制数据不会经过任何的处理.<br>&emsp;&emsp;&emsp;&emsp;字符流：字符流读取的数据是以字符为单位的, 字符流先读取文件中的二进制数据, 然后把这些二进制数据进行编解码.<br>&emsp;&emsp;&emsp;&emsp;<code>字符流 = 字节流 + 解码</code></p>
<p>&emsp;&emsp;判断使用字符流, 字节流的依据 :<br>&emsp;&emsp;&emsp;&emsp;不需要转换成字符的数据, 使用字节流. 如二进制文件 ( 图片, 视频）等.<br>&emsp;&emsp;&emsp;&emsp;需要转换成字符的数据, 使用字符流. 如：文本文件.</p>
<p>&emsp;&emsp;使用:<br>&emsp;&emsp;&emsp;&emsp;对于字节流,使用 <code>FileInputStream + BufferedInputStream</code>  /  <code>FileOutputStream + BufferedOutputStream</code><br>&emsp;&emsp;&emsp;&emsp;对于字符流, 使用 <code>FileInputStream + InputStreamReader (可指定编码) + BufferedReader  ( 可按行读取 )</code>   /  <code>FileOutputStream + OutputStreamWriter (可指定编码) + BufferedWriter  ( 可写入换行 )</code><br>&emsp;&emsp;&emsp;&emsp;对于字符流, 不建议使用 FileWriter 和 FileReader, 因为<code>不能指定编码格式</code>.</p>
<h3 id="IO-流的体系"><a href="#IO-流的体系" class="headerlink" title="IO 流的体系"></a>IO 流的体系</h3><p>|—- IO 流<br>|—- 字节流<br>|——– InputStream<br>|———— <code>FileInputStream</code> 输入字节流类, 读取文件<br>|———— ObjectInputStream<br>|———— FilterInputStream<br>|—————- <code>BufferedInputStream</code> 缓冲输入字节流类<br>|——– OutputStream<br>|———— <code>FileOutputStream</code> 输出字节流类, 写入文件<br>|———— ObjectOutputStream<br>|———— FilterOutputStream<br>|—————- <code>BufferedOutputStream</code> 缓冲输出字节流类<br>|—- 字符流<br>|——– Reader<br>|———— <code>InputStreamReader</code> 输入字节流类<br>|—————- FileReader<br>|———— <code>BufferedReader</code> 缓冲输入字节流类<br>|——– Writer<br>|———— <code>InputStreamWriter</code>输出字节流类<br>|—————- FileWriter<br>|————<code>BufferedWriter</code> 缓冲输出字节流类</p>
<h3 id="字节流"><a href="#字节流" class="headerlink" title="字节流"></a>字节流</h3><p>&emsp;&emsp;需求 : 使用字节流复制二进制文件.</p>
<p>&emsp;&emsp;代码 :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">File source = <span class="keyword">new</span> File(<span class="string">"e:/111/1.mp4"</span>);  <span class="comment">//源文件</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">File dest = <span class="keyword">new</span> File(<span class="string">"e:/111/2.mp4"</span>);    <span class="comment">//要拷贝到的目标文件</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件大小</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> fileSize = source.length() / <span class="number">1000</span> / <span class="number">1000</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> startTime = System.currentTimeMillis();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建输入字符流</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">FileInputStream fileInputStream = <span class="keyword">new</span> FileInputStream(source);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建缓冲输入字符流</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">BufferedInputStream bufferedInputStream = <span class="keyword">new</span> BufferedInputStream(fileInputStream);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建输出字符流</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">FileOutputStream fileOutputStream = <span class="keyword">new</span> FileOutputStream(dest);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建缓冲输出字符流</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">BufferedOutputStream bufferedOutputStream = <span class="keyword">new</span> BufferedOutputStream(fileOutputStream);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 复制(边读边写)</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> length;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> ((length = bufferedInputStream.read()) != -<span class="number">1</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">	bufferedOutputStream.write(length);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关闭资源(先开后关)</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">bufferedOutputStream.close();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">bufferedInputStream.close();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> endTime = System.currentTimeMillis();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> totalTime = (endTime - startTime) / <span class="number">1000</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"文件大小为(MB): "</span> + fileSize);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"花费时间(S): "</span> + totalTime);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"传输速度(MB/S):"</span> + (fileSize / totalTime));</span></pre></td></tr></table></figure>


<p>&emsp;&emsp;<strong>FileInputStream 输入字节流 : 读取文件</strong></p>
<p>&emsp;&emsp;&emsp;&emsp;构造方法 : FileInputStream(File file)    创建一个指向 file 文件的输入流.</p>
<p>&emsp;&emsp;<strong>FileOutputStream 输出字节流 : 写入文件</strong></p>
<p>&emsp;&emsp;&emsp;&emsp;两个构造方法 :<br>&emsp;&emsp;&emsp;&emsp;FileOutputStream(File file)   创建一个指向 file 文件的输出流. 如果该文件不存在, 则会<code>自动创建</code>. 如果该文件存在, 则会清空原有内容, 再写入新内容.<br>&emsp;&emsp;&emsp;&emsp;FileOutputStream(File file, boolean append)    将参数 append 设为 true,  即<code>文件末尾追加写入</code>. 否则就是覆盖写入.</p>
<p>&emsp;&emsp;<strong>BufferedInputStream 缓冲输入字节流</strong></p>
<p>&emsp;&emsp;&emsp;&emsp;注意：凡是<code>缓冲流都不具备读写文件的能力</code>. 缓冲流主要是为了提高读取/写入数据的效率, 该类内部只不过是维护了一个默认大小为 8kb 的字节数组而已. 在创建缓冲流的时候, 可以在构造方法中指定其 缓冲数组的大小.</p>
<p><img alt="1575696518473" data-src="https://i.loli.net/2019/12/07/M5TRaUN7sBfOvQ4.png" class="lazyload"></p>
<p>&emsp;&emsp;&emsp;&emsp;构造方法 : BufferedInputStream(InputStream in)    创建一个 BufferedInputStream. 会自动创建一个内部缓冲区数组并将其存储在 buf 中.</p>
<p>&emsp;&emsp;<strong>BufferedOutputStream 缓冲输出字节流</strong></p>
<p>&emsp;&emsp;&emsp;&emsp;构造方法 : BufferedOutputStream(OutputStream out)    创建一个新的缓冲输出流, 以将数据写入指定的底层输出流.</p>
<p>&emsp;&emsp;&emsp;&emsp;使用 bufferedoutStream 写数据的时候, 它的 write() 方法是是先把数据写到它内部维护的缓冲字节数组中. 如果需耍把数据真正的写到硬盘上面, 需要以下步骤中的任意一个 :<br>&emsp;&emsp;&emsp;&emsp;① 调用 flush() 方法<br>&emsp;&emsp;&emsp;&emsp;② 调用 close() 方法.（这个方法里面有调用 flush() 方法.）<br>&emsp;&emsp;&emsp;&emsp;③ 内部维护的字节数组已经填满数据的时候.</p>
<h3 id="字符流"><a href="#字符流" class="headerlink" title="字符流"></a>字符流</h3><p>&emsp;&emsp;需求 : 一个文件中, 包含了文字 “张三”, 现在需要 创建该文件的副本,  并将文件中所包含的所有 “张三” 替换为 “李四”.</p>
<p>&emsp;&emsp;代码 :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">File source = <span class="keyword">new</span> File(<span class="string">"e:/111/1.txt"</span>); <span class="comment">//源文件</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">File dest = <span class="keyword">new</span> File(<span class="string">"e:/111/2.txt"</span>);   <span class="comment">//复制后的文件</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指定编码</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">String charestName = <span class="string">"UTF-8"</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建输入流</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">FileInputStream inputStream = <span class="keyword">new</span> FileInputStream(source);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">InputStreamReader inputStreamReader = <span class="keyword">new</span> InputStreamReader(inputStream,charestName);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(inputStreamReader);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建输出流</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">FileOutputStream fileOutputStream = <span class="keyword">new</span> FileOutputStream(dest);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">OutputStreamWriter outputStreamWriter = <span class="keyword">new</span> OutputStreamWriter(fileOutputStream,charestName);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(outputStreamWriter);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 复制和替换</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">String content;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> ((content = bufferedReader.readLine()) != <span class="keyword">null</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">	System.out.println(content.length());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">	String newContent = content.replace(<span class="string">"张三"</span>, <span class="string">"李四"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">	bufferedWriter.write(newContent);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">	bufferedWriter.newLine();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关闭资源</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">bufferedWriter.close();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">bufferedReader.close();</span></pre></td></tr></table></figure>

<p>&emsp;&emsp;<strong>InputStreamReader 类</strong></p>
<p>&emsp;&emsp;&emsp;&emsp;该类是从<code>字节流到字符流的桥接器</code>, 它<code>使用指定的字符集读取字节并将它们解码为字符</code>.</p>
<p>&emsp;&emsp;&emsp;&emsp;构造方法:<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;InputStreamReader(InputStream in)     使用默认编码读取文件.<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;InputStreamReader(InputStream in, String charsetName)        使用指定编码读取文件.</p>
<p>&emsp;&emsp;&emsp;&emsp;在不指定编码的时候, 读取文件时默认使用的编码和 JVM 使用的编码相同.</p>
<p><img alt="1575701529352" data-src="https://i.loli.net/2019/12/07/rCYTgfhzFuEe31w.png" class="lazyload"></p>
<p>&emsp;&emsp;<strong>OutputStreamWriter 输出字符流</strong></p>
<p>&emsp;&emsp;&emsp;&emsp;构造方法:<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;OutputStreamWriter(OutputStream out)    使用默认的编码写入文件<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;OutputStreamWriter(OutputStream out, String charsetName)    使用指定的编码写入文件</p>
<p>&emsp;&emsp;<strong>BufferedReader 缓冲输入字符流</strong></p>
<p>&emsp;&emsp;&emsp;&emsp;缓冲流都不具备读写文件的能力. 缓冲输入字符流用来提高读取文件的效率和拓展了 InputStreamReader 的功能，其实该类内部也是维护了一个 8kb 的字符数组.</p>
<p>&emsp;&emsp;&emsp;&emsp;构造方法 :<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;BufferedReader(Reader in)    创建一个使用默认大小的输入缓冲区的缓冲字符输入流.</p>
<p>&emsp;&emsp;&emsp;&emsp;常用方法 :<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;public String readLine()    读取一行. 返回包含该行内容的字符串, 不包含任何行终止符 (“\r\n”).<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;如果读取到的是一个空行, 那么该行字符串的长度 str.length() == 0.<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;如果读取到文件末尾, 则返回 null.</p>
<p>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;readLine() 方法是怎么实现不多不少正好读取一行呢?</p>
<p>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;答:  把读取的内容放到字符数组中, 然后一个字符一个字符的读取, 要是读取到 \r ( Ascii码值为 13 ), 并且紧接着读取到了 \n ( scii码值为 16 ), 那么它就知道一行读取完了, 然后返回, 并且返回的这行数据是不包含 \r\n 的.</p>
<p>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;自己实现 readLine() 的代码 :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">myReadLine</span><span class="params">(FileReader fileReader)</span> <span class="keyword">throws</span> IOException</span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">      StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">      </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">boolean</span> lastIsR = <span class="keyword">false</span>;	<span class="comment">//表示前一个读取到的字符是 '\r'</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">int</span> content = <span class="number">0</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">while</span>((content = fileReader.read()) != -<span class="number">1</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">           <span class="keyword">if</span>(content == <span class="string">'\r'</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">                <span class="keyword">continue</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">           &#125;<span class="keyword">else</span> <span class="keyword">if</span> (content == <span class="string">'\n'</span> &amp;&amp; lastIsR) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">                lastIsR = <span class="keyword">false</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">                <span class="keyword">break</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">           &#125;<span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">                <span class="comment">// 普通字符</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">                sb.append((<span class="keyword">char</span>)content);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">           &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">      &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">      <span class="comment">// 读取到文档末尾</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">if</span>(content == -<span class="number">1</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">           <span class="keyword">return</span> <span class="keyword">null</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">      &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">      <span class="keyword">return</span> sb.toString();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>



<p>&emsp;&emsp;<strong>BufferedWriter 缓冲输出字符流</strong></p>
<p>&emsp;&emsp;&emsp;&emsp;构造方法 ：<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;BufferedWriter(Writer out)    创建一个使用默认大小输出缓冲区的缓冲字符输出流.</p>
<p>&emsp;&emsp;&emsp;&emsp;常用方法 :<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;public void newLine()        写入一个行分隔符. 行分隔符字符串由系统属性 line.separator 定义，并且不一定是单个新行 (‘\n’) 符.</p>
<p><img alt="1575703863040" data-src="https://i.loli.net/2019/12/07/2wVrZlC5vqzFjgN.png" class="lazyload"></p>
<p>&emsp;&emsp;<strong>FileReader 输入字符流</strong></p>
<p>&emsp;&emsp;&emsp;&emsp;使用 FileReader 来读取文件内容十分的方便, 不用考虑英文占 1 个字节, 中文占 2 个字节的问题. 这些全部交给了 FileReader 类来决定应该怎么解码.</p>
<p>&emsp;&emsp;&emsp;&emsp;注意 : 使用 FileReader 类时, <code>不能指定其编码格式, 默认采用的是 JVM 启动时候的本地编码</code>.  所以并<code>不建议使用</code>. 假如你想自己指定字符编码和缓存数组的大小, 请使用 InputStreamReader 类.</p>
<p>&emsp;&emsp;&emsp;&emsp;构造方法:<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;FileReader(File file) </p>
<p>&emsp;&emsp;<strong>FileWriter 输出字符流</strong></p>
<p>&emsp;&emsp;&emsp;&emsp;构造方法 :<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;FileWriter(File file)    根据给定的 File 对象构造一个 FileWriter 对象.如果目标文件不存在, 那么会自动创建目标文件.如果目标文件已经存在了, 那么默认情况会先清空文件中的数据, 然后再写入数据.<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;FileWriter(File file, boolean append)     参数 append 表示是否是追加写入.</p>
<p>&emsp;&emsp;&emsp;&emsp;使用 FileReader 和 FileWriter 读写复制文件 :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.找到目标文件</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">File inFile = <span class="keyword">new</span> File(<span class="string">"E://AA.txt"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">File outFile = <span class="keyword">new</span> File(<span class="string">"E://BB.txt"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//2.建立字符流通道</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">FileReader fileReader = <span class="keyword">new</span> FileReader(inFile);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">FileWriter fileWriter = <span class="keyword">new</span> FileWriter(outFile);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//3.复制文件</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span>[] buf = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> length = <span class="number">0</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>((length = fileReader.read(buf)) != -<span class="number">1</span>)&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    fileWriter.write(buf,<span class="number">0</span>,length);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//4.关闭资源</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">fileReader.close();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">fileWriter.close();</span></pre></td></tr></table></figure>






</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:822202281@qq.com" target="_blank" rel="noopener">SanJingYe88</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="/http:/sanjingye88.love/2019/12/07/Java-IO%E6%B5%81/">http://sanjingye88.love/2019/12/07/Java-IO%E6%B5%81/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java    </a><a class="post-meta__tags" href="/tags/IO/">IO    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2019/12/02/%E7%BA%BF%E7%A8%8B%E6%B1%A0/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>线程池</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> Recommend</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/12/02/线程池/" title="线程池"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><div class="relatedPosts_title">线程池</div></a></div></div><div class="clear_both"></div></div></div></div><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2019 By SanJingYe88</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true; // make power mode colorful
POWERMODE.shake = true; // turn off shake
document.body.addEventListener('input', POWERMODE);
</script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/ClickShowText.js"></script></body></html>